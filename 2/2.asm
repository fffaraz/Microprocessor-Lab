.INCLUDE "M32DEF.INC"

.ORG 0
JMP RESET
.ORG 0x16
JMP TIM0_OVF

.ORG 32

RESET:

LDI R16, LOW(RAMEND)
OUT SPL, R16
LDI R16, HIGH(RAMEND)
OUT SPH, R16

SER R16
OUT DDRC, R16

LDI R16, 1
OUT TIMSK, R16

; clk/1024 (From prescaler)
LDI R16, 0x05
OUT TCCR0, R16

LDI R16, 0
OUT TCNT0, R16

LDI R17, 0
LDI R18, 30

LDI R16, 1
SEI

MAIN: JMP MAIN


TIM0_OVF:

INC R17

CPSE R17, R18
RETI

LDI R17, 0

OUT PORTC, R16
LSL R16
BREQ TIM0_OVF_L1
RETI

TIM0_OVF_L1:
LDI R16, 1
RETI

