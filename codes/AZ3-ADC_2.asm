.INCLUDE "M32DEF.INC"
.ORG 0X0000
JMP MAIN
.ORG	0X20
JMP	ADC_INT

.ORG 0X0050
MAIN:
LDI R16 , lOW(RAMEND)
OUT SPL , R16

LDI R16 , HIGH(RAMEND)
OUT SPH , R16

LDI R16 , 0XFF
OUT DDRC , R16

	LDI		R17 , 0X20
	OUT		ADMUX , R17
	LDI		R17 , 0b11001000
	OUT		ADCSRA , R17
	SEI


LOOP:
	RJMP LOOP

ADC_INT :
	IN		R20 , ADCH
	CALL DECODE
	LDI		R17 , 0b11001000
	OUT		ADCSRA , R17
	RETI

DECODE:
	CPI R20,51	  
	BRSH DEC1	
	LDI R21,0X01	
	OUT PORTC,R21
	RET

DEC1:
	CPI R20,102	  
	BRSH DEC2	
	LDI R21,0X03	
	OUT PORTC,R21
	RET

DEC2:
	CPI R20,153	  
	BRSH DEC3	
	LDI R21,0X0F	
	OUT PORTC,R21
	RET
DEC3:
	CPI R20,204	  
	BRSH DEC4	
	LDI R21,0X1F	
	OUT PORTC,R21
	RET

DEC4:
	CPI R20,255	  
	BRNE DEC5	
	LDI R21,0X3F	
	OUT PORTC,R21
	RET

DEC5:

	LDI R21,0X00	
	OUT PORTC,R21
	RET
